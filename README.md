# Генерация текста с контролем повторов (GenAI-2-41)

Скрипт для сравнения качества генерации текста при использовании параметра `no_repeat_ngram_size = 2`, который предотвращает зацикливание модели и снижает количество повторяющихся n-грамм.

## Возможности

- Сравнение двух режимов генерации: baseline (без ограничений) и improved (с `no_repeat_ngram_size=2`)
- Подсчет количества и доли повторяющихся n-грамм (по умолчанию триграмм)
- Оценка качества генерации по снижению количества повторов
- Гибкая настройка параметров генерации (длина, температура, top-k, top-p, штраф за повторы и др.)

## Требования

- Python 3.8 или выше  
- Библиотеки:
  ```bash
  pip install torch transformers
  ```
  Рекомендуется использовать виртуальное окружение:
  ```bash
  python3 -m venv venv
  source venv/bin/activate
  pip install torch transformers
  ```
## Быстрый старт
  Пример запуска с параметрами по умолчанию:
  ```bash
  python3 Text_generation-repetition_control.py --prompt "В далёкой галактике"
  ```
  Пример с пользовательскими параметрами:
  ```bash
  python3 Text_generation-repetition_control.py --prompt "Напиши вдохновляющую мантру про веру и силу" --min_new_tokens 180 --max_new_tokens 240 --temperature 1.15 --top_k 20 --top_p 0.98 --repetition_penalty 1.0
```
## Пример вывода
  ```bash
  BASELINE 
  В далёкой галактике жили люди, мечтавшие о звёздах...
  Триграмм: 173, уникальных: 172, повторов: 1 (доля 0.006)
  
  IMPROVED
  В далёкой галактике, где свет струился по орбитам...
  Триграмм: 187, уникальных: 187, повторов: 0 (доля 0.000)
  
  ИТОГО
  Снижение повторов: 100.0%
  Метрика ок: True
  ```
  
